"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[507],{3507:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var r,a=t(4165),i=t(1413),s=t(5861),o=t(9439),c=t(2791),l=t(220),d=t(3400),u=t(7621),x=t(7047),h=t(3590),Z=t(8870),f=t(9124),p=t(3896),m=t(8324),j=t(39),v=t(3579),g=t(266),w=t(3536),b=t(3026),y=t(2654),D=t(3575),C=t(9281),S=t(9836),k=t(3382),N=t(5855),M=t(3994),U=t(6314),A=t(4721),P=t(6890),B=t(184),R=function(e){var n=e.userData;return console.log(n),(0,B.jsx)(C.Z,{children:(0,B.jsx)(S.Z,{children:(0,B.jsxs)(k.Z,{children:[(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Name"}),(0,B.jsx)(M.Z,{children:n.name})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Email"}),(0,B.jsx)(M.Z,{children:n.email})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Phone Number"}),(0,B.jsx)(M.Z,{children:n.phoneNumber})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"DOB"}),(0,B.jsx)(M.Z,{children:n.dob})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Place"}),(0,B.jsx)(M.Z,{children:n.place})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Education"}),(0,B.jsx)(M.Z,{children:n.education})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Contact Details"}),(0,B.jsx)(M.Z,{children:n.contactDetails})]})]})})})},q=function(e){var n=e.userData;(0,D.a)().user;return(0,B.jsx)(Z.Z,{children:(0,B.jsxs)(U.Z,{direction:"row",spacing:4,sx:{marginBottom:2},children:[(0,B.jsx)(U.Z,{direction:"column",spacing:2,sx:{width:"30%"},children:(0,B.jsxs)(Z.Z,{children:[(0,B.jsx)("img",{src:n.pic,alt:n.name,style:{width:"50%",height:"50%",marginLeft:30}}),(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(Z.Z,{sx:{marginBottom:2,padding:5},children:(0,B.jsx)(A.Z,{component:"h1"})}),(0,B.jsx)(Z.Z,{children:(0,B.jsx)(C.Z,{children:(0,B.jsxs)(S.Z,{children:[(0,B.jsx)(P.Z,{}),(0,B.jsxs)(k.Z,{children:[(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Access"}),(0,B.jsx)(M.Z,{children:n.access?"true":"false"})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"deleted"}),(0,B.jsx)(M.Z,{children:n.deleted?"true":"false"})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Last Seen"}),(0,B.jsx)(M.Z,{children:(0,y.zM)(n.lastLogin)})]}),(0,B.jsxs)(N.Z,{children:[(0,B.jsx)(M.Z,{component:"th",scope:"row",children:"Rent Books"}),(0,B.jsx)(M.Z,{children:n.requestedBooks.length})]})]})]})})})]}),(0,B.jsx)(Z.Z,{direction:"column",spacing:2,sx:{display:"flex",alignItems:"center"}})]})}),(0,B.jsx)(A.Z,{orientation:"vertical",flexItem:!0}),(0,B.jsxs)(Z.Z,{sx:{width:"50%"},children:[(0,B.jsx)(U.Z,{direction:"column",sx:{marginTop:-5},children:(0,B.jsx)(Z.Z,{sx:{display:"flex",alignItems:"center"},children:(0,B.jsx)(Z.Z,{component:"h1",sx:{marginRight:2},children:n.name})})}),(0,B.jsx)(g.Z,{children:(0,B.jsx)(Z.Z,{children:(0,B.jsx)(Z.Z,{sx:{marginBottom:1},children:(0,B.jsx)(R,{userData:n})})})})]})]})})},E={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},F=new Uint8Array(16);function T(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(F)}for(var W=[],I=0;I<256;++I)W.push((I+256).toString(16).slice(1));function L(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(W[e[n+0]]+W[e[n+1]]+W[e[n+2]]+W[e[n+3]]+"-"+W[e[n+4]]+W[e[n+5]]+"-"+W[e[n+6]]+W[e[n+7]]+"-"+W[e[n+8]]+W[e[n+9]]+"-"+W[e[n+10]]+W[e[n+11]]+W[e[n+12]]+W[e[n+13]]+W[e[n+14]]+W[e[n+15]]).toLowerCase()}var _=function(e,n,t){if(E.randomUUID&&!n&&!e)return E.randomUUID();var r=(e=e||{}).random||(e.rng||T)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var a=0;a<16;++a)n[t+a]=r[a];return n}return L(r)},z=function(e){var n=e.userData,t=(0,c.useState)([]),r=(0,o.Z)(t,2),a=r[0],s=r[1];(0,D.a)().user;(0,c.useEffect)((function(){var e=n.requestedBooks.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{id:_()})}));s(e)}),[n.requestedBooks]);var d=[{field:"image",headerName:"Avatar",flex:.5,renderCell:function(e){return(0,B.jsx)(l.Z,{src:e.row.pic,alt:e.row.title})}},{field:"title",headerName:"Title",flex:1},{field:"author",headerName:"Author",flex:1},{field:"genre",headerName:"Genre",flex:1},{field:"status",headerName:"Status",flex:1},{field:"publicationDate",headerName:"Published Date",flex:2,valueGetter:function(e){return(0,y.Mu)(e.row.publicationDate,"yyyy")}}];return(0,B.jsx)(Z.Z,{children:(0,B.jsx)(g.Z,{children:(0,B.jsx)(u.Z,{children:(0,B.jsx)(m._,{rows:a,columns:d,components:{Toolbar:j.n}})})})})},G=t(4942),V=(t(6907),t(3967)),O=t(890),Y=t(1889),H=t(9504),J=t(2363),K=t(6151),Q=t(8550);function X(e){var n=e.userData,t=((0,V.Z)(),(0,w._)().setTitle),r=(0,D.a)().UpdateUserAdmin,d=(0,c.useState)(!0),h=(0,o.Z)(d,2),f=h[0],p=h[1],m=(0,c.useState)(),j=(0,o.Z)(m,2),v=j[0],b=j[1],y=(0,c.useState)(null),C=(0,o.Z)(y,2),S=C[0],k=C[1],N=(0,c.useState)(!1),M=(0,o.Z)(N,2),P=M[0],R=M[1],q=(0,c.useState)({}),E=(0,o.Z)(q,2),F=E[0],T=E[1],W=(0,c.useState)({}),I=(0,o.Z)(W,2),L=I[0],_=I[1],z=(0,c.useState)("text"),X=(0,o.Z)(z,2),$=X[0],ee=X[1];(0,c.useEffect)((function(){var e=setTimeout((function(){p(!1)}),1e3);return function(){return clearTimeout(e)}}),[]);(0,c.useEffect)((function(){function e(){return(e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(n),b(n.pic),e.next=4,ne(n.dob);case 4:t=e.sent,T((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,G.Z)({},"dob",t))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var ne=function(e){var n=e.split("-"),t=(0,o.Z)(n,3),r=t[0],a=t[1],i=t[2];return"".concat(i,"-").concat(a,"-").concat(r)},te=function(e){var n=e.target,t=n.name,r=n.value;if(T((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,G.Z)({},t,r))})),"dob"===t){var a=re(r);T((function(e){return(0,i.Z)((0,i.Z)({},e),{},{age:a})}))}},re=function(e){var n=new Date,t=new Date(e),r=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();return(a<0||0===a&&n.getDate()<t.getDate())&&r--,r.toString()},ae=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t={},""===F.name&&(t.name="Name is required"),""===F.dob&&(t.dob="Date of Birth is required"),""===F.place&&(t.place="Date of Birth is required"),""===F.education&&(t.education="Education is required"),""===F.address&&(t.address="Address is required"),_(t),0===Object.keys(t).length&&(r(JSON.stringify(F)),_({}),window.location.reload());case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return t("Add Book"),(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(Z.Z,{component:"main",children:(0,B.jsx)(g.Z,{maxWidth:"lg",children:(0,B.jsxs)(U.Z,{children:[f?(0,B.jsx)(x.Z,{variant:"text",width:200}):(0,B.jsx)(O.Z,{variant:"h4",children:"Account"}),(0,B.jsx)("br",{}),(0,B.jsxs)(Y.ZP,{container:!0,spacing:5,children:[(0,B.jsx)(Y.ZP,{item:!0,xs:12,md:6,lg:4,children:f?(0,B.jsx)(x.Z,{variant:"rectangular",height:400}):(0,B.jsxs)(u.Z,{children:[(0,B.jsx)(H.Z,{children:(0,B.jsx)(Z.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column"},children:(0,B.jsx)(l.Z,{src:v||"https://www.pngitem.com/pimgs/m/146-1468479_my-profile-icon-blank-profile-picture-circle-hd.png",sx:{height:80,mb:2,width:80}})})}),(0,B.jsx)(A.Z,{}),(0,B.jsxs)(J.Z,{children:[!S&&(0,B.jsxs)(K.Z,{fullWidth:!0,variant:"text",component:"label",disabled:P,children:[P?"Saving...":"Update Picture",(0,B.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var n=e.target.files[0],t=new FileReader;t.onloadend=function(){b(t.result),k(n)},n&&t.readAsDataURL(n)}})]}),S&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(K.Z,{fullWidth:!0,variant:"text",onClick:function(){if(S){R(!0);var e=new FileReader;e.onloadend=function(){setTimeout((function(){R(!1),b(e.result),k(null),T((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,G.Z)({},"pic",e.result))}))}),1e3)},e.readAsDataURL(S)}},disabled:P,children:"Save"}),(0,B.jsx)(K.Z,{fullWidth:!0,variant:"text",onClick:function(){k(null)},disabled:P,children:"Cancel"})]})]})]})}),(0,B.jsx)(Y.ZP,{item:!0,xs:12,md:6,lg:8,children:f?(0,B.jsx)(x.Z,{variant:"rectangular",height:400}):(0,B.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:ae,children:(0,B.jsxs)(u.Z,{children:[(0,B.jsx)("br",{}),(0,B.jsx)(H.Z,{sx:{pt:0},children:(0,B.jsx)(Z.Z,{children:(0,B.jsxs)(Y.ZP,{container:!0,spacing:1,children:[(0,B.jsxs)(Y.ZP,{item:!0,xs:12,children:[(0,B.jsx)(O.Z,{children:"Name"}),(0,B.jsx)(Q.Z,{fullWidth:!0,name:"name",onChange:te,required:!0,value:F.name,autoFocus:!0})]}),(0,B.jsxs)(Y.ZP,{item:!0,xs:12,md:6,children:[(0,B.jsx)(O.Z,{children:"Date of Birth"}),"text"===$?(0,B.jsx)(Q.Z,{fullWidth:!0,name:"dob",onClick:function(){ee("date")},required:!0,value:F.dob,autoFocus:!0}):(0,B.jsx)(Q.Z,{fullWidth:!0,name:"dob",type:"date",onChange:te,required:!0,value:F.dob,autoFocus:!0}),L.dob&&(0,B.jsx)(O.Z,{variant:"body2",sx:{color:"#f80202"},children:L.dob})]}),(0,B.jsxs)(Y.ZP,{item:!0,xs:12,md:6,children:[(0,B.jsx)(O.Z,{children:"Age"}),(0,B.jsx)(Q.Z,{fullWidth:!0,name:"age",onChange:te,value:F.age,autoFocus:!0})]}),(0,B.jsxs)(Y.ZP,{item:!0,xs:12,children:[(0,B.jsx)(O.Z,{children:"Education"}),(0,B.jsx)(Q.Z,{fullWidth:!0,name:"education",onChange:te,required:!0,value:F.education,autoFocus:!0})]}),(0,B.jsxs)(Y.ZP,{item:!0,xs:12,children:[(0,B.jsx)(O.Z,{children:"Place"}),(0,B.jsx)(Q.Z,{fullWidth:!0,name:"place",onChange:te,required:!0,value:F.place,autoFocus:!0})]}),(0,B.jsxs)(Y.ZP,{item:!0,xs:12,children:[(0,B.jsx)(O.Z,{children:"Address"}),(0,B.jsx)(Q.Z,{fullWidth:!0,name:"contactDetails",onChange:te,required:!0,value:F.contactDetails,autoFocus:!0})]})]})})}),(0,B.jsx)(A.Z,{}),(0,B.jsx)(J.Z,{sx:{justifyContent:"flex-end"},children:(0,B.jsx)(K.Z,{variant:"contained",type:"submit",children:"Save Details"})})]})})})]})]})})})})}var $=function(e){var n=e.userData,t=(0,D.a)(),r=t.BlockUser,i=t.DeleteUser,o=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({id:n.id,access:!n.access});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n._id);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,B.jsxs)(Z.Z,{sx:{display:"flex",justifyContent:"center",marginTop:25},children:[(0,B.jsx)(K.Z,{variant:"contained",color:n.access?"success":"error",onClick:o,disabled:n.delete,children:n.access?"Block User":"Unblock User"}),(0,B.jsx)(Z.Z,{sx:{padding:2}}),(0,B.jsx)(K.Z,{variant:"contained",color:n.delete?"error":"success",onClick:c,children:"Delete User"})]})},ee=function(){var e=(0,w._)().setTitle,n=(0,c.useState)([]),t=(0,o.Z)(n,2),r=t[0],D=t[1],C=(0,c.useState)(!1),S=(0,o.Z)(C,2),k=(S[0],S[1],(0,c.useState)([])),N=(0,o.Z)(k,2),M=N[0],U=N[1],A=(0,c.useState)(!1),P=(0,o.Z)(A,2),R=P[0],E=P[1],F=(0,c.useState)(0),T=(0,o.Z)(F,2),W=T[0],I=T[1],L=(0,c.useState)(!0),_=(0,o.Z)(L,2),G=_[0],V=_[1];(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.Z.get("/admins/users");case 3:n=e.sent,t=n.data.map((function(e){return(0,i.Z)({id:e._id},e)})),D(t),V(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var O=[{field:"image",headerName:"Avatar",flex:.5,renderCell:function(e){return(0,B.jsx)(l.Z,{src:e.row.pic,alt:e.row.name})}},{field:"name",headerName:"Name",flex:1},{field:"email",headerName:"Email",flex:1.5},{field:"phoneNumber",headerName:"Phone",flex:1},{field:"status",headerName:"Status",flex:.5,valueGetter:function(e){return e.row.delete?"deleted":e.row.access?"Access":"Blocked"}},{field:"updated",headerName:"Seen",flex:2,valueGetter:function(e){return(0,y.zM)(e.row.updated)}},{field:"actions",headerName:"Actions",flex:1,renderCell:function(e){return(0,B.jsx)(d.Z,{onClick:function(){return n=e.row,U(n),void E(!0);var n},color:"primary",children:(0,B.jsx)(v.Z,{})})}}];return e("User"),(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(g.Z,{children:[(0,B.jsx)(u.Z,{children:G?(0,B.jsx)(x.Z,{variant:"rectangular",width:"100%",height:400}):(0,B.jsx)(m._,{rows:r,columns:O,components:{Toolbar:j.n},autoHeight:!0,density:"comfortable"})}),(0,B.jsx)(h.Z,{open:R,onClose:function(){E(!1),U(null)},"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,B.jsx)(Z.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"90%",width:"90%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3},children:(0,B.jsxs)(Z.Z,{children:[(0,B.jsxs)(f.Z,{value:W,onChange:function(e,n){I(n)},centered:!0,children:[(0,B.jsx)(p.Z,{label:"Profile"}),(0,B.jsx)(p.Z,{label:"Books"}),(0,B.jsx)(p.Z,{label:"Edit"}),(0,B.jsx)(p.Z,{label:"Control"})]}),0===W&&(0,B.jsx)(g.Z,{sx:{marginTop:5,marginBlockEnd:10},children:(0,B.jsx)(q,{userData:M})}),1===W&&(0,B.jsx)(g.Z,{children:(0,B.jsx)(z,{userData:M})}),2===W&&(0,B.jsx)(g.Z,{children:(0,B.jsx)(X,{userData:M})}),3===W&&(0,B.jsx)(g.Z,{children:(0,B.jsx)($,{userData:M})})]})})})]})})}},2654:function(e,n,t){t.d(n,{DY:function(){return o},Mu:function(){return i},zM:function(){return s}});var r=t(1482),a=t(5939);function i(e,n){var t=n||"dd MMM yyyy";return e?(0,r.Z)(new Date(e),t):""}function s(e,n){var t=n||"dd MMM yyyy p";return e?(0,r.Z)(new Date(e),t):""}function o(e){return e?(0,a.Z)(new Date(e),{addSuffix:!0}):""}},3579:function(e,n,t){var r=t(4836);n.Z=void 0;var a=r(t(5649)),i=t(184),s=(0,a.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");n.Z=s},2363:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(3366),a=t(7462),i=t(2791),s=t(8182),o=t(4419),c=t(6934),l=t(1402),d=t(5878),u=t(1217);function x(e){return(0,u.Z)("MuiCardActions",e)}(0,d.Z)("MuiCardActions",["root","spacing"]);var h=t(184),Z=["disableSpacing","className"],f=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,!t.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,a.Z)({display:"flex",alignItems:"center",padding:8},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),p=i.forwardRef((function(e,n){var t=(0,l.Z)({props:e,name:"MuiCardActions"}),i=t.disableSpacing,c=void 0!==i&&i,d=t.className,u=(0,r.Z)(t,Z),p=(0,a.Z)({},t,{disableSpacing:c}),m=function(e){var n=e.classes,t={root:["root",!e.disableSpacing&&"spacing"]};return(0,o.Z)(t,x,n)}(p);return(0,h.jsx)(f,(0,a.Z)({className:(0,s.Z)(m.root,d),ownerState:p,ref:n},u))}))},9504:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(7462),a=t(3366),i=t(2791),s=t(8182),o=t(4419),c=t(6934),l=t(1402),d=t(5878),u=t(1217);function x(e){return(0,u.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var h=t(184),Z=["className","component"],f=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,n){return n.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),p=i.forwardRef((function(e,n){var t=(0,l.Z)({props:e,name:"MuiCardContent"}),i=t.className,c=t.component,d=void 0===c?"div":c,u=(0,a.Z)(t,Z),p=(0,r.Z)({},t,{component:d}),m=function(e){var n=e.classes;return(0,o.Z)({root:["root"]},x,n)}(p);return(0,h.jsx)(f,(0,r.Z)({as:d,className:(0,s.Z)(m.root,i),ownerState:p,ref:n},u))}))}}]);
//# sourceMappingURL=507.adcb7851.chunk.js.map