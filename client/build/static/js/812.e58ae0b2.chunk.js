"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[812],{2812:function(e,n,r){r.r(n),r.d(n,{default:function(){return R}});var t=r(4165),i=r(1413),a=r(5861),s=r(9439),o=r(2791),c=r(220),l=r(3400),d=r(7621),u=r(3590),x=r(9124),h=r(3896),f=r(3579),Z=r(6907),m=r(266),p=r(184),j=r(3575),g=r(3026),b=r(8324),v=r(39),w=r(2654),k=(0,r(3814).Z)(),y=r(9671),D=r(5418),C=r(8721),R=function(){var e=(0,j.a)(),n=(e.GetDashboradData,e.adminHomeData,(0,o.useState)([])),r=(0,s.Z)(n,2),R=r[0],B=r[1],S=(0,o.useState)(null),M=(0,s.Z)(S,2),N=M[0],I=M[1],_=(0,o.useState)(!1),A=(0,s.Z)(_,2),q=A[0],G=A[1],L=(0,o.useState)(0),T=(0,s.Z)(L,2),z=T[0],E=T[1];(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.Z.get("/users/books/liked");case 3:n=e.sent,r=n.data.map((function(e){return(0,i.Z)({id:e._id},e)})),B(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Y=[{field:"image",headerName:"Avatar",flex:.5,renderCell:function(e){return(0,p.jsx)(c.Z,{src:e.row.pic,alt:e.row.name})}},{field:"title",headerName:"Title",flex:1},{field:"author",headerName:"Author",flex:1},{field:"genre",headerName:"Genre",flex:1},{field:"status",headerName:"Status",flex:1},{field:"publicationDate",headerName:"Published Date",flex:2,valueGetter:function(e){return(0,w.Mu)(e.row.publicationDate,"yyyy")}},{field:"actions",headerName:"Actions",flex:1,renderCell:function(e){return(0,p.jsx)(l.Z,{onClick:function(){return n=e.row,I(n),void G(!0);var n},color:"primary",children:(0,p.jsx)(f.Z,{})})}}];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Z.ql,{children:(0,p.jsx)("title",{children:"User | MI LIBRO"})}),(0,p.jsx)(m.Z,{children:(0,p.jsx)(d.Z,{children:(0,p.jsx)(b._,{rows:R,columns:Y,components:{Toolbar:v.n}})})}),(0,p.jsx)(u.Z,{open:q,onClose:function(){G(!1),I(null)},"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,p.jsx)(k,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"90%",width:"90%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3},children:(0,p.jsxs)(k,{children:[(0,p.jsxs)(x.Z,{value:z,onChange:function(e,n){E(n)},centered:!0,children:[(0,p.jsx)(h.Z,{label:"Details"}),(0,p.jsx)(h.Z,{label:"Review"}),(0,p.jsx)(h.Z,{label:"History"})]}),0===z&&(0,p.jsx)(m.Z,{sx:{marginTop:5,marginBlockEnd:10},children:(0,p.jsx)(y.Z,{bookData:N})}),1===z&&(0,p.jsx)(m.Z,{children:(0,p.jsx)(D.Z,{bookData:N})}),2===z&&(0,p.jsx)(m.Z,{children:(0,p.jsx)(C.Z,{bookData:N})})]})})})]})}},9671:function(e,n,r){var t=r(4165),i=r(5861),a=r(9439),s=r(2791),o=r(6388),c=r(1310),l=r(2654),d=r(3575),u=r(9281),x=r(9836),h=r(3382),f=r(5855),Z=r(3994),m=r(8870),p=r(6314),j=r(266),g=r(4721),b=r(6151),v=r(3590),w=r(890),k=r(748),y=(r(937),r(185)),D=r(184),C=function(e){var n=e.bookData;return(0,D.jsx)(u.Z,{children:(0,D.jsx)(x.Z,{children:(0,D.jsxs)(h.Z,{children:[(0,D.jsxs)(f.Z,{children:[(0,D.jsx)(Z.Z,{component:"th",scope:"row",children:"Author"}),(0,D.jsx)(Z.Z,{children:n.author})]}),(0,D.jsxs)(f.Z,{children:[(0,D.jsx)(Z.Z,{component:"th",scope:"row",children:"Published Date"}),(0,D.jsx)(Z.Z,{children:(0,l.Mu)(n.publicationDate,"yyyy")})]}),(0,D.jsxs)(f.Z,{children:[(0,D.jsx)(Z.Z,{component:"th",scope:"row",children:"ISBN"}),(0,D.jsx)(Z.Z,{children:n.ISBN})]}),(0,D.jsxs)(f.Z,{children:[(0,D.jsx)(Z.Z,{component:"th",scope:"row",children:"Genre"}),(0,D.jsx)(Z.Z,{children:n.genre})]}),(0,D.jsxs)(f.Z,{children:[(0,D.jsx)(Z.Z,{component:"th",scope:"row",children:"Description"}),(0,D.jsx)(Z.Z,{children:n.description})]})]})})})};n.Z=function(e){var n=e.bookData,r=(0,d.a)(),l=r.user,u=r.LikeBook,x=r.sendRequest,h=r.returnBook,f=(0,s.useContext)(y.u).showToast,Z=(0,s.useState)(),R=(0,a.Z)(Z,2),B=R[0],S=R[1],M=(0,s.useState)(!1),N=(0,a.Z)(M,2),I=N[0],_=N[1],A=s.useState(0),q=(0,a.Z)(A,2),G=q[0],L=q[1];(0,s.useEffect)((function(){S(P())}),[]);var T=function(){u(n._id,!z)},z=function(){for(var e=!1,r=0;r<n.likes.length;r++)n.likes[r]._id===l.id&&(e=!0);return e},E=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(n._id,G);case 2:_(!1),window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){_(!1)},P=function(){var e=n.status;return"Available"===e?"Available":"Rented"===e?n.rented.user===l.id?"Return Book":"Rented":"Processing"===e?n.request===l._id?"Request send":"Book on a request":"Unavailable"===e?"Book unavailable":"Book not available"};return(0,D.jsxs)(m.Z,{children:[(0,D.jsxs)(p.Z,{direction:"row",spacing:4,sx:{marginBottom:2},children:[(0,D.jsx)(p.Z,{direction:"column",spacing:2,sx:{width:"30%"},children:(0,D.jsxs)(m.Z,{children:[(0,D.jsx)("img",{src:n.pic,alt:n.title,style:{width:"50%",height:"50%",marginLeft:30}}),(0,D.jsx)(j.Z,{children:(0,D.jsx)(m.Z,{sx:{marginBottom:2,padding:9},children:(0,D.jsx)(g.Z,{component:"h1"})})}),(0,D.jsxs)(m.Z,{direction:"column",spacing:2,sx:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(b.Z,{variant:"contained",color:z()?"error":"primary",onClick:T,startIcon:(0,D.jsx)(o.Z,{}),children:n.likes.length}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",(0,D.jsx)(b.Z,{variant:"contained",color:"primary",onClick:T,startIcon:(0,D.jsx)(c.Z,{}),children:n.comments.length})]})]})}),(0,D.jsx)(g.Z,{orientation:"vertical",flexItem:!0}),(0,D.jsxs)(m.Z,{sx:{width:"50%"},children:[(0,D.jsx)(p.Z,{direction:"row",justifyContent:"flex-end",sx:{marginTop:3},children:(0,D.jsx)(b.Z,{color:"Available"===B||"Return Book"===B?"primary":"Request send"===B||"Book on a request"===B?"warning":"error",variant:"contained",onClick:function(){return"Available"===n.status?(x({id:n._id}),f("Requested !","success")):"Return Book"!==P()?f("Book Not Available for rend!","error"):void _(!0)},children:B})}),(0,D.jsx)(p.Z,{direction:"column",sx:{marginTop:-5},children:(0,D.jsx)(m.Z,{sx:{display:"flex",alignItems:"center"},children:(0,D.jsx)(m.Z,{component:"h1",sx:{marginRight:2},children:n.title})})}),(0,D.jsx)(j.Z,{children:(0,D.jsx)(m.Z,{children:(0,D.jsx)(m.Z,{sx:{marginBottom:2},children:(0,D.jsx)(C,{bookData:n})})})})]})]}),(0,D.jsx)(v.Z,{open:I,onClose:Y,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,D.jsx)(m.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"50%",width:"50%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3},children:(0,D.jsxs)(m.Z,{children:[(0,D.jsx)(w.Z,{children:"Do you want to Return ?"}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)(w.Z,{component:"legend",children:"Rate"}),(0,D.jsx)(k.Z,{name:"simple-controlled",value:G,onChange:function(e,n){L(n)}}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)(b.Z,{variant:"contained",onClick:Y,children:"Cancel"}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",(0,D.jsx)(b.Z,{variant:"contained",onClick:E,children:"Yes"})]})})})]})}},8721:function(e,n,r){var t=r(3433),i=r(9439),a=r(2791),s=r(220),o=r(8870),c=r(266),l=r(7621),d=r(2654),u=r(8324),x=r(39),h=r(3575),f=r(184);n.Z=function(e){var n=e.bookData,r=(0,a.useState)([]),Z=(0,i.Z)(r,2),m=Z[0],p=Z[1],j=(0,h.a)().user;(0,a.useEffect)((function(){n.buyers.map((function(e,n){var r={id:e.id,name:e.user.name,pic:e.user.pic,rentDate:(0,d.zM)(e.rentDate),returnDate:(0,d.zM)(e.returnDate),stars:e.stars,itsYou:e.user._id===j.id};return p((function(e){return[].concat((0,t.Z)(e),[r])}))}))}),[]);var g=[{field:"image",headerName:"Avatar",flex:.5,renderCell:function(e){return(0,f.jsx)(s.Z,{src:e.row.pic,alt:e.row.name})}},{field:"name",headerName:"Name",flex:1,valueGetter:function(e){return e.row.itsYou?e.row.name+" (You)":e.row.name}},{field:"rentDate",headerName:"Rent Date",flex:1,valueGetter:function(e){return(0,d.Mu)(e.row.rentDate)}},{field:"returnDate",headerName:"Return Date",flex:1,valueGetter:function(e){return(0,d.Mu)(e.row.returnDate)}},{field:"stars",headerName:"stars",flex:1}];return(0,f.jsx)(o.Z,{children:(0,f.jsx)(c.Z,{children:(0,f.jsx)(l.Z,{children:(0,f.jsx)(u._,{rows:m,columns:g,components:{Toolbar:x.n}})})})})}},5418:function(e,n,r){var t=r(4165),i=r(5861),a=r(3433),s=r(9439),o=r(2791),c=r(8870),l=r(6314),d=r(8550),u=r(6151),x=r(4721),h=(r(3026),r(3575)),f=r(2654),Z=r(184);n.Z=function(e){var n=e.bookData,r=(0,o.useState)(""),m=(0,s.Z)(r,2),p=m[0],j=m[1],g=(0,h.a)(),b=g.user,v=g.CommentBook,w=(0,o.useState)([]),k=(0,s.Z)(w,2),y=k[0],D=k[1];(0,o.useEffect)((function(){var e=n.comments.filter((function(e){return e.message&&""!==e.message&&!y.some((function(n){return n.id===e._id}))})),r=e.map((function(e){return{id:e._id,user:e.user.name,pic:e.user.pic,message:e.message,time:(0,f.zM)(e.commentDate)}}));D((function(e){return[].concat((0,a.Z)(e),(0,a.Z)(r))}))}),[n.comments]);var C=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={id:n._id,user:b.name,pic:b.pic,message:p,time:(new Date).toLocaleString()},e.next=3,v(r);case 3:D((function(e){return[].concat((0,a.Z)(e),[r])})),j("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)(l.Z,{direction:"column",spacing:2,sx:{marginBottom:2},children:(0,Z.jsxs)(c.Z,{display:"flex",alignItems:"center",children:[(0,Z.jsx)(c.Z,{marginRight:1,children:(0,Z.jsx)("img",{src:b.pic,alt:b.name,style:{width:"40px",height:"40px",borderRadius:"50%"}})}),(0,Z.jsx)(c.Z,{flexGrow:1,children:(0,Z.jsx)(d.Z,{label:"Type your comment",value:p,onChange:function(e){j(e.target.value)},fullWidth:!0})}),(0,Z.jsx)(c.Z,{marginLeft:1,children:(0,Z.jsx)(u.Z,{variant:"contained",sx:{bgcolor:"green",color:"white"},onClick:C,children:"Send"})})]})}),(0,Z.jsx)(x.Z,{}),(0,Z.jsx)(c.Z,{children:y.map((function(e,n){return(0,Z.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",padding:1,borderBottom:"1px solid grey",boxShadow:1},children:[(0,Z.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)("img",{src:e.pic,alt:e.user,style:{width:"40px",height:"40px",borderRadius:"50%"}}),(0,Z.jsx)(c.Z,{sx:{marginLeft:1},children:e.user}),(0,Z.jsx)(c.Z,{sx:{marginLeft:1},children:e.time})]}),(0,Z.jsx)("br",{})," ",(0,Z.jsx)("br",{}),(0,Z.jsx)(c.Z,{sx:{marginLeft:8,height:8},children:e.message})]},n)}))})]})}},2654:function(e,n,r){r.d(n,{DY:function(){return o},Mu:function(){return a},zM:function(){return s}});var t=r(1482),i=r(5939);function a(e,n){var r=n||"dd MMM yyyy";return e?(0,t.Z)(new Date(e),r):""}function s(e,n){var r=n||"dd MMM yyyy p";return e?(0,t.Z)(new Date(e),r):""}function o(e){return e?(0,i.Z)(new Date(e),{addSuffix:!0}):""}},3579:function(e,n,r){var t=r(4836);n.Z=void 0;var i=t(r(5649)),a=r(184),s=(0,i.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"RemoveRedEye");n.Z=s}}]);
//# sourceMappingURL=812.e58ae0b2.chunk.js.map