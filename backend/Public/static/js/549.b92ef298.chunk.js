"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[549],{4549:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i=t(9439),a=t(2791),r=t(6907),s=t(3967),c=t(4554),l=t(9164),d=t(6314),u=t(7047),o=t(890),h=t(1889),x=t(3575),Z=t(7621),f=t(9504),j=t(3044),m=t(4721),p=t(2363),v=t(6151),g=t(184);function b(){var e=(0,x.a)(),n=e.user,t=e.updateUserProfileFetch,r=(0,a.useState)(),s=(0,i.Z)(r,2),l=s[0],d=s[1],u=(0,a.useState)(null),h=(0,i.Z)(u,2),b=h[0],y=h[1],P=(0,a.useState)(!1),F=(0,i.Z)(P,2),D=F[0],C=F[1];(0,a.useEffect)((function(){d(n.pic)}),[n]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(Z.Z,{children:[(0,g.jsx)(f.Z,{children:(0,g.jsxs)(c.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,g.jsx)(j.Z,{src:l,sx:{height:80,mb:2,width:80}}),(0,g.jsx)(o.Z,{gutterBottom:!0,variant:"h5",children:n.name}),(0,g.jsx)(o.Z,{color:"text.secondary",variant:"body2",children:n.email}),(0,g.jsx)(o.Z,{color:"text.secondary",variant:"body2",children:n.phno})]})}),(0,g.jsx)(m.Z,{}),(0,g.jsxs)(p.Z,{children:[!b&&(0,g.jsxs)(v.Z,{fullWidth:!0,variant:"text",component:"label",disabled:D,children:[D?"Saving...":"Update Picture",(0,g.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){var n=e.target.files[0],t=new FileReader;t.onloadend=function(){d(t.result),y(n)},n&&t.readAsDataURL(n)}})]}),b&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v.Z,{fullWidth:!0,variant:"text",onClick:function(){if(b){C(!0);var e=new FileReader;e.onloadend=function(){setTimeout((function(){C(!1),d(e.result),y(null),t(e.result)}),1e3)},e.readAsDataURL(b)}},disabled:D,children:"Save"}),(0,g.jsx)(v.Z,{fullWidth:!0,variant:"text",onClick:function(){d(n.pic),y(null)},disabled:D,children:"Cancel"})]})]})]})})}var y=t(4165),P=t(4942),F=t(1413),D=t(5861),C=t(9585),q=t(8550),W=t(8096),S=t(8029),w=function(){var e=(0,x.a)(),n=e.isAuthenticated,t=e.user,r=e.getUserData_,s=e.updateUserDataFetch,l=(0,a.useState)({}),d=(0,i.Z)(l,2),u=d[0],j=d[1],b=(0,a.useState)({}),w=(0,i.Z)(b,2),k=w[0],A=w[1],N=(0,a.useState)("text"),E=(0,i.Z)(N,2),U=E[0],B=E[1];(0,a.useEffect)((function(){function e(){return(e=(0,D.Z)((0,y.Z)().mark((function e(){var n,t;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return n=e.sent,j(n),e.next=6,R(n.dob);case 6:t=e.sent,j((function(e){return(0,F.Z)((0,F.Z)({},e),{},(0,P.Z)({},"dob",t))}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]);var R=function(e){var n=e.split("-"),t=(0,i.Z)(n,3),a=t[0],r=t[1],s=t[2];return"".concat(s,"-").concat(r,"-").concat(a)},I=function(e){var n=e.target,t=n.name,i=n.value;if(j((function(e){return(0,F.Z)((0,F.Z)({},e),{},(0,P.Z)({},t,i))})),"dob"===t){var a=T(i);j((function(e){return(0,F.Z)((0,F.Z)({},e),{},{age:a})}))}},T=function(e){var n=new Date,t=new Date(e),i=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();return(a<0||0===a&&n.getDate()<t.getDate())&&i--,i.toString()};return(0,g.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:function(e){e.preventDefault();var n={};""===u.name&&(n.name="Name is required"),""===u.phoneNumber&&(n.phoneNumber="Phone number is required"),""===u.dob&&(n.dob="Date of Birth is required"),""===u.place&&(n.place="Date of Birth is required"),""===u.education&&(n.education="Education is required"),""===u.address&&(n.address="Address is required"),A(n),0===Object.keys(n).length&&(s(u),A({}))},children:(0,g.jsxs)(Z.Z,{children:[(0,g.jsx)(C.Z,{defaultExpanded:!0,subheader:"The information can be edited",title:"Profile"}),(0,g.jsx)("br",{}),(0,g.jsx)(f.Z,{sx:{pt:0},children:(0,g.jsx)(c.Z,{children:(0,g.jsxs)(h.ZP,{container:!0,spacing:3,children:[(0,g.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,g.jsx)(o.Z,{children:"Name"}),(0,g.jsx)(q.Z,{fullWidth:!0,name:"name",onChange:I,required:!0,value:u.name,autoFocus:!0})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,g.jsx)(o.Z,{children:"Email "}),(0,g.jsx)(q.Z,{fullWidth:!0,name:"email",disabled:!0,value:u.email,autoFocus:!0})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,g.jsx)(o.Z,{children:"Phone Number"}),(0,g.jsxs)(W.Z,{fullWidth:!0,error:!!k.phone,children:[(0,g.jsx)(S.Z,{id:"outlined-adornment-phoneNo",type:"text",name:"phone",value:u.phoneNumber,onChange:I,disabled:!0,autoFocus:!0}),k.phoneNumber&&(0,g.jsx)(o.Z,{variant:"body2",sx:{color:"#f80202"},children:k.phoneNumber})]})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,md:6,children:[(0,g.jsx)(o.Z,{children:"Date of Birth"}),"text"===U?(0,g.jsx)(q.Z,{fullWidth:!0,name:"dob",onClick:function(){B("date")},required:!0,value:u.dob,autoFocus:!0}):(0,g.jsx)(q.Z,{fullWidth:!0,name:"dob",type:"date",onChange:I,required:!0,value:u.dob,autoFocus:!0}),k.dob&&(0,g.jsx)(o.Z,{variant:"body2",sx:{color:"#f80202"},children:k.dob})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,md:6,children:[(0,g.jsx)(o.Z,{children:"Age"}),(0,g.jsx)(q.Z,{fullWidth:!0,name:"age",onChange:I,value:u.age,autoFocus:!0})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,g.jsx)(o.Z,{children:"Education"}),(0,g.jsx)(q.Z,{fullWidth:!0,name:"education",onChange:I,required:!0,value:u.education,autoFocus:!0})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,g.jsx)(o.Z,{children:"Place"}),(0,g.jsx)(q.Z,{fullWidth:!0,name:"place",onChange:I,required:!0,value:u.place,autoFocus:!0})]}),(0,g.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,g.jsx)(o.Z,{children:"Address"}),(0,g.jsx)(q.Z,{fullWidth:!0,name:"contactDetails",onChange:I,required:!0,value:u.contactDetails,autoFocus:!0})]})]})})}),(0,g.jsx)(m.Z,{}),(0,g.jsx)(p.Z,{sx:{justifyContent:"flex-end"},children:(0,g.jsx)(v.Z,{variant:"contained",disabled:!["name","phone","dob","age","education","address","place","contactDetails"].every((function(e){return""!==u[e]})),type:"submit",children:"Save Details"})})]})})};function k(){(0,s.Z)();var e=(0,x.a)(),n=e.isAuthenticated,t=e.IsPermit,Z=(e.user,a.useState(!0)),f=(0,i.Z)(Z,2),j=f[0],m=f[1];return(0,a.useEffect)((function(){t(!1);var e=setTimeout((function(){m(!1)}),2e3);return function(){return clearTimeout(e)}}),[n]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(r.ql,{children:(0,g.jsx)("title",{children:"Account | MI LIBRO"})}),(0,g.jsx)(c.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,g.jsx)(l.Z,{maxWidth:"lg",children:(0,g.jsxs)(d.Z,{spacing:3,children:[(0,g.jsx)("div",{children:j?(0,g.jsx)(u.Z,{variant:"text",width:200,height:40}):(0,g.jsx)(o.Z,{variant:"h4",children:"Account"})}),(0,g.jsx)("br",{}),(0,g.jsx)("div",{children:(0,g.jsxs)(h.ZP,{container:!0,spacing:5,children:[(0,g.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:4,children:j?(0,g.jsx)(u.Z,{variant:"rectangular",height:400}):(0,g.jsx)(b,{})}),(0,g.jsx)(h.ZP,{item:!0,xs:12,md:6,lg:8,children:j?(0,g.jsx)(u.Z,{variant:"rectangular",height:400}):(0,g.jsx)(w,{})})]})})]})})})]})}}}]);
//# sourceMappingURL=549.b92ef298.chunk.js.map